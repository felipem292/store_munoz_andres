(this["webpackJsonprewards-store"]=this["webpackJsonprewards-store"]||[]).push([[0],{103:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c);a(103),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(12),l=a(11),u=a.n(l),i=a(28),p=a(44),d=a.n(p),m=a(19),f="ERROR",E="LOADING";function v(e,t){switch(t.type){case"USER/DETAILS":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});case"USER/POINTS":return Object(m.a)(Object(m.a)({},e),{},{points:t.payload});case"PRODUCTS/LIST":return Object(m.a)(Object(m.a)({},e),{},{products:t.payload});case"USER/PRODUCTS":return Object(m.a)(Object(m.a)({},e),{},{productsByUser:t.payload});case f:return Object(m.a)(Object(m.a)({},e),{},{error:t.payload});case E:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload});case"SUCCESS_MESSAGE/UPDATE":return Object(m.a)(Object(m.a)({},e),{},{successMesage:t.payload});default:throw new Error("Unhandled action type: ".concat(t.type))}}var y=r.a.createContext(),h=r.a.createContext(),b=function(e){var t=e.children,a=r.a.useReducer(v,{user:null,error:null,products:null,productsByUser:null,points:null,loading:!1,successMesage:null}),n=Object(s.a)(a,2),c=n[0],o=n[1];return r.a.createElement(y.Provider,{value:c},r.a.createElement(h.Provider,{value:o},t))};function g(){var e=r.a.useContext(y);if(void 0===e)throw new Error("useRewardStoreState must be used within a RewardStoreProvider");return e}function x(){var e=r.a.useContext(h);if(void 0===e)throw new Error("useRewardStoreDispatch must be used within a RewardStoreProvider");return e}function O(){return[g(),x()]}var _=a(60),S=a.n(_).a.create({baseURL:"https://coding-challenge-api.aerolab.co/"});S.defaults.headers.common.Authorization="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk";var w=S;function j(e){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E,payload:!0}),e.next=4,w.get("user/me");case 4:a=e.sent,t({type:"USER/DETAILS",payload:a.data.name}),t({type:"USER/POINTS",payload:a.data.points}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:f,payload:e.t0});case 12:return e.prev=12,t({type:E,payload:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}function N(){return(N=Object(i.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E,payload:!0}),e.next=4,w.get("user/history");case 4:a=e.sent,n=a.data.sort((function(e,t){return e.createDate<t.createDate?1:-1})),t({type:"USER/PRODUCTS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:f,payload:e.t0});case 12:return e.prev=12,t({type:E,payload:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}function k(){return(k=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E,payload:!0}),e.next=4,w.get("products");case 4:a=e.sent,t({type:"PRODUCTS/LIST",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:f,payload:e.t0});case 11:return e.prev=11,t({type:E,payload:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function U(e){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(u.a.mark((function e(t){var a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1e3,e.prev=1,t({type:E,payload:!0}),e.next=5,w.post("user/points",{amount:a});case 5:n=e.sent,t({type:"USER/POINTS",payload:n.data["New Points"]}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:f,payload:e.t0});case 12:return e.prev=12,t({type:E,payload:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}function I(e,t){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,a);case 2:return e.next=4,j(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:E,payload:!0}),e.next=4,w.post("redeem",{productId:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t({type:f,payload:e.t0});case 9:return e.prev=9,t({type:E,payload:!1}),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))).apply(this,arguments)}var B=function(e){var t=e.name;return r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-home"}),t)},M=function(e){var t=e.points,a=e.onClickHandler;return r.a.createElement("span",{style:{marginLeft:"1rem"},onClick:a,"data-test":"points-container"},r.a.createElement("i",{className:"far fa-money-bill-alt"}),r.a.createElement("span",{style:{paddingLeft:"10px"},"data-test":"points-amount"},"$",(new Intl.NumberFormat).format(t)))},A=a(41),H=a(49),L=function(){var e=O(),t=Object(s.a)(e,2),a=t[0],n=t[1],c=H.a.Option,o=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[1e3,5e3,7500],console.log(t),a=parseInt(t),e.next=5,U(n,a);case 5:n({type:"SUCCESS_MESSAGE/UPDATE",payload:"$".concat(Intl.NumberFormat().format(a)," Points increased successfully")});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:d.a.header},r.a.createElement(A.b,{to:"/",className:d.a.box},r.a.createElement(B,{name:""})),r.a.createElement(A.b,{to:"/history",className:d.a.box},r.a.createElement("i",{className:"fas fa-history"})," Historial de Canjes"),r.a.createElement("div",{className:d.a.box},a.user,r.a.createElement(M,{onClickHandler:o,points:a.points})),r.a.createElement("div",{className:d.a.box},r.a.createElement(H.a,{defaultValue:"A\xf1adir Puntos",style:{width:"100%"},onChange:o},r.a.createElement(c,{value:"1000"},"1000"),r.a.createElement(c,{value:"5000"},"5000"),r.a.createElement(c,{value:"7500"},"7500"))))},G=a(66),F=a.n(G),J=function(e){var t=e.children;return r.a.createElement("div",{className:F.a.modal},r.a.createElement("div",{className:F.a.children},t))},W=a(89),z=a.n(W),Q=function(){return r.a.createElement("div",{className:z.a.lds_grid},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},X=a(8),$=a(45),K=a.n($),V=function(e){var t=e.product,a=e.onBuyProductHandler;return r.a.createElement("div",{className:K.a.product},r.a.createElement("img",{src:t.img.url,alt:t.name,className:K.a.image,"data-test":"product-image"}),r.a.createElement("span",{"data-test":"product-category"},"Category: ",t.category),r.a.createElement("span",{"data-test":"product-name"},r.a.createElement("strong",null,t.name)),r.a.createElement("span",{className:K.a.cost,"data-test":"product-cost"},"$",Intl.NumberFormat().format(t.cost)),a&&r.a.createElement("div",{className:K.a.divButton},r.a.createElement("button",{"data-test":"product-redeem-button",className:K.a.button,onClick:a},"Redeem now")))},Z=a(90),q=a.n(Z);var Y=function(e,t){var a=Object(n.useState)(1),r=Object(s.a)(a,2),c=r[0],o=r[1],l=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,l)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,l)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:l}},ee=a(128),te=function(e){var t=e.products,a=e.redeeming,c=void 0===a||a,o=x(),l=Object(n.useState)(1),p=Object(s.a)(l,2),d=p[0],m=p[1],f=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(o,t._id);case 2:o({type:"SUCCESS_MESSAGE/UPDATE",payload:"".concat(t.name," redeemed successfully")});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Math.ceil(t?t.length:0),v=Y(t||[],12);return r.a.createElement("div",{className:q.a.products},t&&v.currentData().map((function(e,t){return r.a.createElement(V,{key:"".concat(e._id).concat(t),product:e,onBuyProductHandler:c?function(){return f(e)}:null})})),r.a.createElement(ee.a,{style:{marginTop:"2rem"},defaultCurrent:d,total:E,page:d,onChange:function(e){m(e),v.jump(e)}}))},ae=function(){var e,t=O(),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(8),u=Object(s.a)(l,2),i=u[0],p=u[1];Object(n.useEffect)((function(){!function(e){N.apply(this,arguments)}(o)}),[o]);var d=(null===(e=c.productsByUser)||void 0===e?void 0:e.slice(0,i))||null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Productos Canjeados"),r.a.createElement(te,{products:d,redeeming:!1}),r.a.createElement("button",{style:{padding:"10px 30px",backgroundColor:"#0AD4FA",color:"white",fontWeight:"800",border:"none",borderRadius:"25px",cursor:"pointer",fontSize:"1.1em",display:"flex",margin:"auto",marginBottom:"50px"},onClick:function(){p(i+8)}},"Mostrar Mas"))},ne=a(32),re=a.n(ne),ce=function(){var e=O(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],i=l[1];return r.a.createElement("div",{className:re.a.filters},r.a.createElement("span",null,"Sort by: "),r.a.createElement("div",{className:re.a.divButtons},r.a.createElement("button",{className:"".concat(re.a.button," ").concat("recent"===u?re.a.active:""),onClick:function(){var e=a.products;console.log(a);var t=e.sort((function(e,t){return e.name>t.name?1:-1}));c({type:"PRODUCTS/LIST",payload:t}),i("recent")}},"Alphabetical"),r.a.createElement("button",{className:"".concat(re.a.button," ").concat("lowest"===u?re.a.active:""),onClick:function(){var e=a.products.sort((function(e,t){return e.cost>t.cost?1:-1}));c({type:"PRODUCTS/LIST",payload:e}),i("lowest")}},"Lowest Price"),r.a.createElement("button",{className:"".concat(re.a.button," ").concat("highest"===u?re.a.active:""),onClick:function(){var e=a.products.sort((function(e,t){return e.cost<t.cost?1:-1}));c({type:"PRODUCTS/LIST",payload:e}),i("highest")}},"Highest Price")))},oe=function(){var e=O(),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){!function(e){k.apply(this,arguments)}(c)}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null),r.a.createElement("hr",{style:{margin:"0px",color:"#CCC"}}),r.a.createElement(te,{products:a.products}))},se=a(91),le=a.n(se),ue=function(e){var t=e.errorMessage;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",minWidth:"100vw",textAlign:"center",alignItems:"center"}},r.a.createElement("img",{width:"50%",src:le.a,alt:"Error Message"}),r.a.createElement("span",null,"We're sorry, We're facing some issues :( "),r.a.createElement("span",null,"Error ocurred: ",t))},ie=a(67),pe=a.n(ie),de=function(e){var t=e.message,a=e.onClickHandler;return r.a.createElement("div",{className:pe.a.success,onClick:a},r.a.createElement("span",{className:pe.a.close},"X"),r.a.createElement("span",null,t))},me=a(92),fe=a.n(me),Ee=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:fe.a,alt:"hero img",width:"100%"}))},ve=function(){var e=O(),t=Object(s.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){j(c)}),[c]);return r.a.createElement("div",null,a.error?r.a.createElement(ue,{errorMessage:a.error.message}):r.a.createElement(r.a.Fragment,null,a.loading&&r.a.createElement(J,null,r.a.createElement(Q,null)),r.a.createElement(L,null),r.a.createElement(Ee,null),r.a.createElement("div",{style:{padding:"0px 5%"}},r.a.createElement(X.c,null,r.a.createElement(X.a,{exact:!0,path:"/history"},r.a.createElement(ae,null)),r.a.createElement(X.a,{path:"/"},r.a.createElement(oe,null)))),a.successMesage&&r.a.createElement(de,{message:a.successMesage,onClickHandler:function(){c({type:"SUCCESS_MESSAGE/UPDATE",payload:null})}})))};a(125);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null,r.a.createElement(A.a,null,r.a.createElement(ve,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,a){e.exports={filters:"filters_filters__3g3uP",divButtons:"filters_divButtons__13_rW",button:"filters_button__2H8kJ",active:"filters_active__1clhx"}},44:function(e,t,a){e.exports={header:"Header_header__10NUf",box:"Header_box__3u_EX"}},45:function(e,t,a){e.exports={product:"product_product__32z3k",image:"product_image__1nBA9",cost:"product_cost__1oc0t",divButton:"product_divButton__mGHJC",button:"product_button__2bgxy"}},66:function(e,t,a){e.exports={modal:"Modal_modal__1Hf1F"}},67:function(e,t,a){e.exports={success:"success_success__1oa-q",close:"success_close__1rCb_"}},89:function(e,t,a){e.exports={lds_grid:"loader_lds_grid__BKA2f"}},90:function(e,t,a){e.exports={products:"products_products__3-sc0"}},91:function(e,t,a){e.exports=a.p+"static/media/error.46e33ae4.jpg"},92:function(e,t,a){e.exports=a.p+"static/media/header-x2.a343e153.png"},98:function(e,t,a){e.exports=a(126)}},[[98,1,2]]]);
//# sourceMappingURL=main.d8e676ed.chunk.js.map